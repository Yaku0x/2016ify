<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>2016ify</title>

<style>
:root{
  --bg:#0b0f14; --panel:#0f1621; --ink:#e6f0ff; --muted:#98a6b8;
  --line:#223044; --accent:#6cf; --accent2:#f6c;
  --shadow:0 10px 30px rgba(0,0,0,.45); --radius:14px;
  --mono:ui-monospace,Menlo,Consolas,monospace;
  --sans:system-ui,-apple-system,Segoe UI,Roboto,Arial;
}
*{box-sizing:border-box}
body{
  margin:0;min-height:100vh;color:var(--ink);font-family:var(--sans);
  background:
    radial-gradient(900px 400px at 20% 0%, rgba(102,204,255,.12), transparent 60%),
    radial-gradient(900px 400px at 80% 20%, rgba(255,102,204,.10), transparent 60%),
    linear-gradient(180deg,#06080c,#0b0f14 45%,#070a0f);
}
.wrap{max-width:1100px;margin:22px auto;padding:16px}
.topbar{
  display:flex;justify-content:space-between;align-items:center;
  padding:14px 16px;background:rgba(15,22,33,.85);
  border:1px solid var(--line);border-radius:var(--radius);
  box-shadow:var(--shadow);backdrop-filter:blur(6px)
}
.brand{font-family:var(--mono);text-transform:uppercase}
.brand .title{font-size:14px}
.brand .sub{font-size:12px;color:var(--muted)}
.chip{
  font-size:11px;font-weight:800;padding:2px 8px;border-radius:999px;
  background:linear-gradient(90deg,var(--accent),var(--accent2));color:#000
}
.grid{display:grid;grid-template-columns:380px 1fr;gap:16px;margin-top:16px}
@media(max-width:980px){.grid{grid-template-columns:1fr}}
.panel{
  background:rgba(15,22,33,.85);border:1px solid var(--line);
  border-radius:var(--radius);box-shadow:var(--shadow)
}
.panel h3{
  margin:0;padding:12px 14px;font-family:var(--mono);
  font-size:12px;border-bottom:1px solid var(--line)
}
.content{padding:14px}
input,button{
  width:100%;background:#0b121c;border:1px solid var(--line);
  color:var(--ink);padding:12px;border-radius:12px;font-family:var(--mono)
}
button{cursor:pointer;text-transform:uppercase}
button.secondary{border-color:rgba(255,102,204,.4)}
.canvasWrap{padding:14px;display:flex;flex-direction:column;align-items:center}
canvas{
  width:100%;max-width:720px;aspect-ratio:1/1;
  border-radius:16px;background:#0b121c;
  border:1px solid rgba(102,204,255,.25)
}
.status{
  width:100%;max-width:720px;display:flex;justify-content:space-between;
  font-family:var(--mono);font-size:11px;color:var(--muted)
}
.tiny{font-family:var(--mono);font-size:11px;color:var(--muted);white-space:pre-wrap}
.ok{color:#b9ffb9}.warn{color:#ffd7a1}
</style>
</head>

<body>
<div class="wrap">

<div class="topbar">
  <div class="brand">
    <div class="title">2016ify <span class="chip">BETA</span></div>
    <div class="sub">Upload → Generate → Download</div>
  </div>
  <div class="brand" style="text-align:right">
    <div class="title">1:1 OUTPUT</div>
    <div class="sub">1024×1024</div>
  </div>
</div>

<div class="grid">
<div class="panel">
<h3>Generator</h3>
<div class="content">
<input id="upload" type="file" accept="image/*">
<button id="generate">Generate</button>
<button id="download" class="secondary" disabled>Download PNG</button>
<div class="tiny" id="assetStatus">Loading assets…</div>
</div>
</div>

<div class="panel">
<h3>Preview</h3>
<div class="canvasWrap">
<canvas id="c" width="1024" height="1024"></canvas>
<div class="status">
<div>Mode: <b>Ring</b></div>
<div>Assets: <b id="assetCount">—</b></div>
</div>
</div>
</div>
</div>

</div>

<script>
/* ================= CORE ================= */
const canvas = document.getElementById("c");
const ctx = canvas.getContext("2d");
const upload = document.getElementById("upload");
const generate = document.getElementById("generate");
const download = document.getElementById("download");
const assetStatus = document.getElementById("assetStatus");
const assetCount = document.getElementById("assetCount");

let subjectImg = null;
let ASSETS = { memes:[], snap:[], misc:[], textures:[] };
let IMGS = [];
let assetsReady = false;

const rand = () => Math.random();

const loadImage = src => new Promise((res,rej)=>{
  const i = new Image();
  i.crossOrigin="anonymous";
  i.onload=_=>res(i);
  i.onerror=_=>rej();
  i.src=src;
});

/* =============== ASSET LOAD =============== */
(async ()=>{
  try{
    const res = await fetch("assets/manifest.json?"+Date.now());
    ASSETS = await res.json();
    for(const k in ASSETS){
      for(const p of ASSETS[k]){
        try{ IMGS.push(await loadImage(p)); }catch{}
      }
    }
    assetsReady = IMGS.length > 0;
    assetCount.textContent = IMGS.length;
    assetStatus.innerHTML = assetsReady
      ? "<span class='ok'>Assets loaded.</span>"
      : "<span class='warn'>No assets loaded.</span>";
  }catch(e){
    assetStatus.innerHTML = "<span class='warn'>Manifest failed.</span>";
  }
})();

/* =============== RENDER =================== */
function render(){
  if(!subjectImg || !assetsReady) return;

  ctx.clearRect(0,0,1024,1024);

  // background noise
  ctx.fillStyle="#0b121c";
  ctx.fillRect(0,0,1024,1024);

  // subject
  ctx.drawImage(subjectImg, 128,128,768,768);

  // ring keep-out
  const cx=512, cy=512;
  const innerR = 320;
  const outerR = 500;

  for(let i=0;i<14;i++){
    const img = IMGS[Math.floor(rand()*IMGS.length)];
    const angle = rand()*Math.PI*2;
    const r = innerR + rand()*(outerR-innerR);
    const w = 120 + rand()*180;
    const h = w * (img.height/img.width);

    const x = cx + Math.cos(angle)*r - w/2;
    const y = cy + Math.sin(angle)*r - h/2;

    ctx.save();
    ctx.globalAlpha = 0.5 + rand()*0.5;
    ctx.translate(x+w/2,y+h/2);
    ctx.rotate((rand()-0.5)*1.2);
    ctx.drawImage(img,-w/2,-h/2,w,h);
    ctx.restore();
  }

  // caption
  ctx.font="900 86px Impact";
  ctx.textAlign="center";
  ctx.fillStyle="#fff";
  ctx.strokeStyle="#000";
  ctx.lineWidth=8;
  ctx.strokeText("2026 IS THE NEW 2016",512,960);
  ctx.fillText("2026 IS THE NEW 2016",512,960);

  download.disabled=false;
}

/* =============== EVENTS ================== */
upload.onchange = async e=>{
  subjectImg = await loadImage(URL.createObjectURL(e.target.files[0]));
  render();
};
generate.onclick = render;
download.onclick = ()=>{
  const a=document.createElement("a");
  a.download="2016ify.png";
  a.href=canvas.toDataURL();
  a.click();
};
</script>
</body>
</html>
